# üîå –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ò–ù–¢–ï–ì–†–ê–¶–ò–ò API

**–í–µ—Ä—Å–∏—è:** v20
**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [Auth4App API](#auth4app-api)
3. [OpenAI API](#openai-api)
4. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è DOCX/PDF](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-docxpdf)
5. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
6. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –®–∞–≥ 1: –ö–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω .env

```bash
cp .env.example .env
```

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ API –∫–ª—é—á–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏:

```env
# Auth4App
NEXT_PUBLIC_AUTH4APP_API_KEY=your_auth4app_api_key
NEXT_PUBLIC_AUTH4APP_PROJECT_ID=your_project_id

# OpenAI
OPENAI_API_KEY=sk-your_openai_api_key
OPENAI_MODEL=gpt-4o-mini
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev server

```bash
bun run dev
```

### ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API –≤–º–µ—Å—Ç–æ mock-—Ä–µ–∂–∏–º–∞.

---

## üîê AUTH4APP API

### –ß—Ç–æ —ç—Ç–æ?

Auth4App ‚Äî —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ SMS/WhatsApp –±–µ–∑ –ø–∞—Ä–æ–ª—è.

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://support.auth4app.com/books/rest-api

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏?

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å:** https://auth4app.com/
2. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç** –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ:**
   - API Key
   - Project ID

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
NEXT_PUBLIC_AUTH4APP_API_KEY=–≤–∞—à_api_–∫–ª—é—á
NEXT_PUBLIC_AUTH4APP_PROJECT_ID=–≤–∞—à_project_id

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –Ω–æ–º–µ—Ä–∞ –¥–ª—è –∞–≤—Ç–æ–ª–æ–≥–∏–Ω–∞ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
NEXT_PUBLIC_AUTH4APP_TEST_PHONE=+79202222222
NEXT_PUBLIC_ADMIN_PHONE=+79999999999
```

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –ø–æ SMS/WhatsApp
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∞
- ‚úÖ Fallback –≤ mock-—Ä–µ–∂–∏–º –±–µ–∑ –∫–ª—é—á–µ–π

### API Routes

#### 1. `/api/auth/init` - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞

**–ó–∞–ø—Ä–æ—Å:**
```typescript
POST /api/auth/init
Content-Type: application/json

{
  "phone": "+79202222222"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "auth_id": "auth_123456",
  "message": "–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω",
  "isMock": false
}
```

#### 2. `/api/auth/confirm` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞

**–ó–∞–ø—Ä–æ—Å:**
```typescript
POST /api/auth/confirm
Content-Type: application/json

{
  "auth_id": "auth_123456",
  "code": "1234"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "phone": "+79202222222",
  "message": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞",
  "isMock": false
}
```

### –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å?

1. **–ë–µ–∑ –∫–ª—é—á–µ–π (mock-—Ä–µ–∂–∏–º):**
   - –õ—é–±–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –õ—é–±–æ–π 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
   - –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

2. **–° –∫–ª—é—á–∞–º–∏ (—Ä–µ–∞–ª—å–Ω—ã–π API):**
   - –ù–∞—Å—Ç–æ—è—â–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –ö–æ–¥ –∏–∑ SMS/WhatsApp
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

–û–±–Ω–æ–≤–∏—Ç–µ `/src/app/auth/login/page.tsx`:

```typescript
// –ë—ã–ª–æ (mock):
const user = mockAuth.login(phone);

// –°—Ç–∞–Ω–µ—Ç (—Ä–µ–∞–ª—å–Ω—ã–π API):
const response = await fetch('/api/auth/init', { ... });
```

---

## ü§ñ OPENAI API

### –ß—Ç–æ —ç—Ç–æ?

OpenAI API –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPT-4 –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://platform.openai.com/docs

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á?

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å:** https://platform.openai.com/signup
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ API Keys:** https://platform.openai.com/api-keys
3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á**
4. **–î–æ–±–∞–≤—å—Ç–µ –±–∞–ª–∞–Ω—Å** (–º–∏–Ω–∏–º—É–º $5)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
OPENAI_API_KEY=sk-–≤–∞—à_–∫–ª—é—á

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑–∞–Ω—ã –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
OPENAI_MODEL=gpt-4o-mini          # –ú–æ–¥–µ–ª—å (–¥–µ—à–µ–≤–ª–µ –∏ –±—ã—Å—Ç—Ä–µ–µ —á–µ–º gpt-4)
OPENAI_MAX_TOKENS=2000            # –ú–∞–∫—Å. –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞
OPENAI_TEMPERATURE=0.7            # –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (0.0-1.0)
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –¶–µ–Ω–∞ | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|------|----------|----------|--------------|
| `gpt-4o-mini` | üí∞ | ‚ö°‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê | **–î–ª—è production** |
| `gpt-4o` | üí∞üí∞üí∞ | ‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| `gpt-3.5-turbo` | üí∞ | ‚ö°‚ö°‚ö° | ‚≠ê‚≠ê | –£—Å—Ç–∞—Ä–µ–ª–∞ |

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º:** `gpt-4o-mini` ‚Äî –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ.

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç (–∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ requisitesGuard –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- ‚úÖ Fallback –≤ mock-—Ä–µ–∂–∏–º –±–µ–∑ –∫–ª—é—á–∞

### API Route

#### `/api/ai/chat` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞

**–ó–∞–ø—Ä–æ—Å:**
```typescript
POST /api/ai/chat
Content-Type: application/json

{
  "userPrompt": "–°–æ—Å—Ç–∞–≤—å –¥–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥ –Ω–∞ 30 –¥–Ω–µ–π",
  "templateName": "–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥",
  "conversationHistory": [
    { "role": "user", "content": "–ù—É–∂–µ–Ω –¥–æ–≥–æ–≤–æ—Ä" },
    { "role": "assistant", "content": "–ö–∞–∫–æ–π —Å—Ä–æ–∫?" }
  ]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "text": "–î–û–ì–û–í–û–† –û–ö–ê–ó–ê–ù–ò–Ø –£–°–õ–£–ì\n\n1. –ü–†–ï–î–ú–ï–¢ –î–û–ì–û–í–û–†–ê\n...",
  "isMock": false,
  "usage": {
    "prompt_tokens": 245,
    "completion_tokens": 512,
    "total_tokens": 757
  }
}
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç–æ–≤?

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º:

```
–¢—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–≤.
–¢–µ–∫—É—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: {templateName}

–ü—Ä–∞–≤–∏–ª–∞:
1. –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –†–§
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º –∏ –ø—É–Ω–∫—Ç–∞–º
3. –ù–ï –≤–∫–ª—é—á–∞–π —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (–ò–ù–ù, –û–ì–†–ù, –∞–¥—Ä–µ—Å–∞, –§–ò–û)
4. –ò—Å–ø–æ–ª—å–∑—É–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∫–∞–∫ –æ—Å–Ω–æ–≤—É
```

### –°—Ç–æ–∏–º–æ—Å—Ç—å

–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è `gpt-4o-mini`:

- **1 –¥–æ–∫—É–º–µ–Ω—Ç:** ~$0.01-0.03
- **100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** ~$1-3
- **1000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** ~$10-30

**–°–æ–≤–µ—Ç:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–∏–º–∏—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö OpenAI.

### –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å?

1. **–ë–µ–∑ –∫–ª—é—á–∞ (mock-—Ä–µ–∂–∏–º):**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Å –≥–æ—Ç–æ–≤—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏
   - –û—Ç–≤–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π
   - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ

2. **–° –∫–ª—é—á–æ–º (—Ä–µ–∞–ª—å–Ω—ã–π GPT):**
   - –ù–∞—Å—Ç–æ—è—â–∏–π –ò–ò –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç
   - –û—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ 2-5 —Å–µ–∫—É–Ω–¥
   - –†–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä mock-—Ä–µ–∂–∏–º–∞

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ mock-—Ä–µ–∂–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç toast:

```
‚ÑπÔ∏è –ò–ò —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ
```

---

## üìÑ –ì–ï–ù–ï–†–ê–¶–ò–Ø DOCX/PDF

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è DOCX —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `docx`
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `pdf-lib`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ä–∞–∑–¥–µ–ª—ã)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ –∫–æ–Ω—Ü–µ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### API Routes

#### 1. `/api/documents/generate-docx`

**–ó–∞–ø—Ä–æ—Å:**
```typescript
POST /api/documents/generate-docx
Content-Type: application/json

{
  "bodyText": "–î–û–ì–û–í–û–†\n\n1. –ü–†–ï–î–ú–ï–¢ –î–û–ì–û–í–û–†–ê\n...",
  "requisites": {
    "bank_name": "–ü–ê–û –°–±–µ—Ä–±–∞–Ω–∫",
    "bank_bik": "044525225"
  },
  "templateName": "–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥",
  "organization": {
    "name_full": "–û–û–û \"–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞\"",
    "inn": "1234567890",
    "kpp": "123456789",
    "ogrn": "1234567890123"
  }
}
```

**–û—Ç–≤–µ—Ç:**
- Content-Type: `application/vnd.openxmlformats-officedocument.wordprocessingml.document`
- –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª .docx
- Content-Disposition: `attachment; filename="–î–æ–≥–æ–≤–æ—Ä_–æ–∫–∞–∑–∞–Ω–∏—è_—É—Å–ª—É–≥_1234567890.docx"`

#### 2. `/api/documents/generate-pdf`

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ DOCX, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç PDF:

- Content-Type: `application/pdf`
- Content-Disposition: `attachment; filename="–î–æ–≥–æ–≤–æ—Ä_–æ–∫–∞–∑–∞–Ω–∏—è_—É—Å–ª—É–≥_1234567890.pdf"`

### –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç?

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ (–∫—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç, –ø–æ —Ü–µ–Ω—Ç—Ä—É)
2. **–¢–µ–ª–æ:** –¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. **–†–µ–∫–≤–∏–∑–∏—Ç—ã:** –ë–ª–æ–∫ –≤ –∫–æ–Ω—Ü–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:

- **–ó–ê–ì–û–õ–û–í–ö–ò** ‚Äî —Å—Ç—Ä–æ–∫–∏ –∏–∑ –∑–∞–≥–ª–∞–≤–Ω—ã—Ö –±—É–∫–≤ (–¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤)
- **–ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã** ‚Äî —Å—Ç—Ä–æ–∫–∏ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "1.", "2.1.", –∏ —Ç.–¥.
- **–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç** ‚Äî –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### DOCX —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤ –∫–ª–∏–µ–Ω—Ç–µ:

```typescript
const response = await fetch('/api/documents/generate-docx', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ bodyText, requisites, templateName, organization })
});

const blob = await response.blob();
const url = window.URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = 'document.docx';
a.click();
```

–≠—Ç–æ—Ç –∫–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `/src/app/docs/page.tsx`.

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**DOCX:**
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∞–±–ª–∏—Ü (–ø–æ–∫–∞)
- –ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ë–∞–∑–æ–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**PDF:**
- –¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞ –∏ –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã)
- –ù–µ—Ç –∂–∏—Ä–Ω–æ–≥–æ/–∫—É—Ä—Å–∏–≤–∞ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –£–ª—É—á—à–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

- [ ] –¢–∞–±–ª–∏—Ü—ã –≤ DOCX
- [ ] –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –ª–æ–≥–æ—Ç–∏–ø—ã
- [ ] –†—É—Å—Å–∫–∏–µ —à—Ä–∏—Ñ—Ç—ã –≤ PDF (–∑–∞–≥—Ä—É–∑–∫–∞ .ttf —Ñ–∞–π–ª–æ–≤)
- [ ] –ü–æ–¥–ø–∏—Å–∏ –∏ –ø–µ—á–∞—Ç–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ HTML

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Auth4App

**–ë–µ–∑ –∫–ª—é—á–µ–π (mock):**
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ /auth/login
# –í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–π –Ω–æ–º–µ—Ä: +7 920 222-22-22
# –í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–π –∫–æ–¥: 1234
# ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
```

**–° –∫–ª—é—á–∞–º–∏ (—Ä–µ–∞–ª—å–Ω—ã–π API):**
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ /auth/login
# –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
# –î–æ–∂–¥–∏—Ç–µ—Å—å SMS/WhatsApp
# –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
# ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenAI

**–ë–µ–∑ –∫–ª—é—á–∞ (mock):**
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ /templates
# –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω —Å hasBodyChat = true
# –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å: "–°–æ—Å—Ç–∞–≤—å –¥–æ–≥–æ–≤–æ—Ä –Ω–∞ 30 –¥–Ω–µ–π"
# ‚ÑπÔ∏è –£–≤–∏–¥–∏—Ç–µ toast: "–ò–ò —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ"
# ‚úÖ –ü–æ–ª—É—á–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç (–∏–∑ fallback)
```

**–° –∫–ª—é—á–æ–º (—Ä–µ–∞–ª—å–Ω—ã–π GPT):**
```bash
# –¢–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ:
# ‚è≥ –û—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ 2-5 —Å–µ–∫—É–Ω–¥
# ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç GPT
# –ë–µ–∑ toast "–¥–µ–º–æ-—Ä–µ–∂–∏–º"
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ DOCX/PDF

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç (—á–µ—Ä–µ–∑ —á–∞—Ç –∏–ª–∏ –±–µ–∑)
# –û—Ç–∫—Ä–æ–π—Ç–µ /docs
# –ù–∞–∂–º–∏—Ç–µ "–°–∫–∞—á–∞—Ç—å DOCX"
# ‚úÖ –§–∞–π–ª —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ Word/LibreOffice
# ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

# –¢–æ –∂–µ —Å PDF:
# –ù–∞–∂–º–∏—Ç–µ "–°–∫–∞—á–∞—Ç—å PDF"
# ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –≤ Adobe Reader
```

---

## üêõ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### Auth4App –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–æ–¥ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
- –û—à–∏–±–∫–∞ "–°–µ—Ä–≤–∏—Å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:
   ```bash
   echo $NEXT_PUBLIC_AUTH4APP_API_KEY
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –Ω–µ —Ä–∞–≤–µ–Ω `your_auth4app_api_key_here`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev server: `bun run dev`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

### OpenAI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

**–°–∏–º–ø—Ç–æ–º:** "–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ù–µ—Ç –∫–ª—é—á–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `OPENAI_API_KEY`
2. **–ù–µ—Ç –±–∞–ª–∞–Ω—Å–∞:** https://platform.openai.com/account/billing
3. **–ü—Ä–µ–≤—ã—à–µ–Ω rate limit:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ –º–∏–Ω—É—Ç—É
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `gpt-4o-mini`

**–û—Ç–ª–∞–¥–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
# API route –ø–∏—à–µ—Ç –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
```

### DOCX/PDF –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç –∏–º–µ–µ—Ç `bodyText`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

### "–ò–ò —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ" –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** OpenAI –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ `OPENAI_API_KEY` –≤ `.env`
2. –ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk-`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `bun run dev`

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò

### –ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏?

**–°–µ—Ä–≤–µ—Ä–Ω—ã–µ API routes:**
```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `bun run dev`
# –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:
[INFO] OpenAI: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞...
[ERROR] OpenAI API error: ...
[WARN] Auth4App –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è mock-—Ä–µ–∂–∏–º
```

**–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –æ—à–∏–±–∫–∏:**
```bash
# –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
# –í–∫–ª–∞–¥–∫–∞ Console
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ: https://platform.openai.com/usage
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–∏–º–∏—Ç—ã –≤ Settings ‚Üí Limits
```

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö API:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–π flow:**
   - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚Üí –ß–∞—Ç —Å –ò–ò ‚Üí –°–∫–∞—á–∏–≤–∞–Ω–∏–µ

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ production:**
   - –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Netlify Environment Variables
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API –∫–ª—é—á–µ–π

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ OpenAI –æ—Ç–≤–µ—Ç–æ–≤
   - –î–æ–±–∞–≤—å—Ç–µ rate limiting
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ (Sentry)

4. **–£–ª—É—á—à–∏—Ç–µ UX:**
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

**–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç –≥–∞–π–¥
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ `.env.example`
3. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
4. –ù–∞–ø–∏—à–∏—Ç–µ: support@same.new

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- Auth4App: https://support.auth4app.com
- OpenAI: https://help.openai.com
- docx library: https://docx.js.org
- pdf-lib: https://pdf-lib.js.org

---

**–£–¥–∞—á–∏ –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏! üöÄ**
