# Поля реквизитов

## Связанные страницы

- [JSON-shema](JSON-shema%2028aeb7bb740980ae995ff9b5c20b86de.md) — соответствующие правила и форматы.
- [Реквизиты шаблона (Admin)](../%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%B0%D0%BC%D0%B8(Admin)%20290eb7bb740980f4b9cbddad53d459a6/%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0%20%C2%AB%D0%A0%D0%B5%D0%BA%D0%B2%D0%B8%D0%B7%D0%B8%D1%82%D1%8B%20%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%B0%C2%BB%20(Admin)%2028aeb7bb740980259c6bc2f927c441ac.md) — чекбоксы строятся строго по этому списку.
- [Создать организацию](../%D0%9E%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8%20(User)%20290eb7bb7409805296c1ef496ca5beed/%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0%20%C2%AB%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8E%C2%BB%20(User)%2028aeb7bb7409809d8022f7110f55b6e7.md) / [Редактировать организацию](../%D0%9E%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8%20(User)%20290eb7bb7409805296c1ef496ca5beed/%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0%20%C2%AB%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8E%C2%BB%20(User)%2028aeb7bb74098009b196db734e80a2de.md) — с какими полями работает пользователь.
- [Модуль проверки (JS)](../%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D1%81%20%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8%20(User)%20290eb7bb7409804da0aed86f3433deb2/%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D1%8C%20%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B8%20(%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D1%8B%D0%B9%20%D0%BA%D0%BE%D0%B4,%20JS)%20requisitesGuard%20%2028feb7bb7409805ab92ddac72668c178.md) — привязка правил валидации.

**Источник правды:** предоставленная **JSON Schema (ECMA-safe regex)**. Ниже — полный справочник полей в человеко-читаемом виде, строго согласованный со схемой: метка, `system_name`, тип, обязательность, **ECMA-совместимый regex**, дополнительные алгоритмические проверки, нормализация, примеры ошибок.

---

# 1) Общие данные

Этот справочник используется администратором на странице

**«Реквизиты шаблона»**

Отмеченные поля при создании документа и **автоподставляются**

из выбранной организации пользователя (если заполнены).

### 1.1 Полное наименование

- **system_name:** `name_full`
- **type:** string (2–150)
- **required:** да (для юрлица и ИП)
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\s«»"'\-\.,()&/]{2,150}$`
- **нормализация:** trim, схлопывание двойных пробелов
- **ошибка:** «Укажите полное наименование (2–150 символов)».

### 1.2 Краткое наименование

- **system_name:** `name_short`
- **type:** string (2–80)
- **required:** нет
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\s«»"'\-\.,()&/]{2,80}$`
- **нормализация:** как выше
- **ошибка:** «Краткое наименование — 2–80 символов».

### 1.3 Тип субъекта

- **system_name:** `subject_type`
- **type:** enum — `legal_entity` | `sole_proprietor`
- **required:** да
- **regex (ECMA):** `^(legal_entity|sole_proprietor)$`
- **ошибка:** «Выберите тип субъекта: юрлицо или ИП».

---

# 2) Идентификаторы

### 2.1 ИНН

- **system_name:** `inn`
- **type:** string (digits)
- **required:** да (для обоих типов; длина зависит от типа)
- **regex (общий, ECMA):** `^\d{10}$|^\d{12}$`
    - **юрлицо:** `^\d{10}$`
    - **ИП:** `^\d{12}$`
- **контрольная сумма:**
    - **ИНН-10 (юрлицо):** веса `[2,4,10,3,5,9,4,6,8]`, Σ→%11→%10 = 10-я цифра.
    - **ИНН-12 (ИП):**
        - 11-я цифра по весам `[7,2,4,10,3,5,9,4,6,8]`
        - 12-я цифра по весам `[3,7,2,4,10,3,5,9,4,6,8]`
        - правило: `(Σ % 11) % 10`.
- **кросс-проверка:** длина строго соответствует `subject_type`.
- **ошибки:** «ИНН юрлица — 10 цифр / ИНН ИП — 12 цифр», «ИНН не проходит контрольную сумму».

### 2.2 КПП (только юрлица)

- **system_name:** `kpp`
- **type:** string (digits)
- **required:** да, только при `subject_type = legal_entity` (для ИП поле скрыто)
- **regex (ECMA):** `^\d{9}$`
- **ошибка:** «КПП — 9 цифр (только для юрлица)».

### 2.3 ОГРН / ОГРНИП

- **system_name (юрлицо):** `ogrn` — **regex:** `^\d{13}$`
- **system_name (ИП):** `ogrnip` — **regex:** `^\d{15}$`
- **type:** string (digits)
- **required:** да — строго в соответствии с типом
- **контрольная цифра:**
    - **ОГРН:** `(первые 12 цифр % 11) % 10 == 13-я`.
    - **ОГРНИП:** `(первые 14 цифр % 13) % 10 == 15-я`.
- **ошибки:** «ОГРН — 13 цифр / ОГРНИП — 15 цифр», «Не проходит контрольную сумму».

### 2.4 ОКПО (опционально)

- **system_name:** `okpo`
- **type:** string (digits)
- **required:** нет
- **regex (ECMA):** `^\d{8}(\d{2})?$`
- **ошибка:** «ОКПО — 8 или 10 цифр». *(Контрольный разряд допустимо не проверять в MVP.)*

### 2.5 ОКВЭД (опционально, основной)

- **system_name:** `okved`
- **type:** string
- **required:** нет
- **regex (ECMA):** `^\d{2}(\.\d{1,2}){0,2}$`
- **ошибка:** «ОКВЭД в формате NN(.N)(.N)».

---

# 3) Адреса и контакты

### 3.1 Юридический адрес

- **system_name:** `address_legal`
- **type:** string (5–200)
- **required:** да
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\s\.,;:'"()\-/\\#№]{5,200}$`
- **ошибка:** «Укажите юридический адрес (5–200 символов)».

### 3.2 Почтовый адрес

- **system_name:** `address_postal`
- **type:** string|null (5–200 при наличии)
- **required:** нет
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\s\.,;:'"()\-/\\#№]{5,200}$`
- **логика:** чекбокс «совпадает с юридическим» копирует `address_legal`.
- **ошибка:** «Почтовый адрес — 5–200 символов».

### 3.3 Телефон

- **system_name:** `phone`
- **type:** string|null
- **required:** нет
- **regex (ECMA):** `^(\+7|8)\d{10}$`
- **нормализация хранения:** в БД сохраняем **только** в формате `+7XXXXXXXXXX` (ввод `8…` → конвертируем).
- **ошибка:** «Телефон в формате +7XXXXXXXXXX (или 8XXXXXXXXXX на вводе)».

### 3.4 E-mail

- **system_name:** `email`
- **type:** string
- **required:** да
- **regex (ECMA, упрощённый RFC 5322):** `^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$`
- **ошибка:** «E-mail в формате [name@example.com](mailto:name@example.com)».

### 3.5 Сайт (опционально)

- **system_name:** `website`
- **type:** string|null
- **required:** нет
- **regex (ECMA):** `^https?://[^\s]+$`
- **ошибка:** «URL должен начинаться с http:// или https://».

---

# 4) Руководитель и полномочия

### 4.1 Должность руководителя

- **system_name:** `head_title`
- **type:** string (2–80)
- **required:** да
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё\s\-«»"'.]{2,80}$`
- **ошибка:** «Должность — 2–80 символов».

### 4.2 ФИО руководителя

- **system_name:** `head_fio`
- **type:** string
- **required:** да
- **regex (строгий, кириллица, ECMA):**
    
    `^[А-ЯЁ][а-яё]+(?:\-[А-ЯЁ][а-яё]+)?\s[А-ЯЁ][а-яё]+(?:\-[А-ЯЁ][а-яё]+)?\s[А-ЯЁ][а-яё]+(?:\-[А-ЯЁ][а-яё]+)?$`
    
    *(альтернатива в схеме: более общий паттерн + проверка длины; приоритет — строгий паттерн)*
    
- **ошибка:** «Укажите ФИО в формате «Фамилия Имя Отчество» кириллицей».

### 4.3 Действует на основании

- **system_name:** `authority_base`
- **type:** enum — `Устава` | `Доверенности`
- **required:** да
- **ошибка:** «Укажите основание полномочий: „Устава“ или „Доверенности“».

### 4.4 Номер доверенности *(обязательно, если «Доверенности»)*

- **system_name:** `poa_number`
- **type:** string|null (1–30)
- **required:** да, если `authority_base = Доверенности`
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\-_/]{1,30}$`
- **ошибка:** «Номер доверенности — 1–30 символов».

### 4.5 Дата доверенности *(обязательно, если «Доверенности»)*

- **system_name:** `poa_date`
- **type:** string|null
- **required:** да, если `authority_base = Доверенности`
- **regex (ECMA):** `^(0[1-9]|[12]\d|3[01])\.(0[1-9]|1[0-2])\.(19|20)\d{2}$`
- **доп.проверка:** валидность календарной даты и «не позже сегодня».
- **ошибка:** «Дата доверенности в формате ДД.ММ.ГГГГ, не позже сегодня».

---

# 5) Банковские реквизиты

### 5.1 БИК

- **system_name:** `bank_bik`
- **type:** string (digits)
- **required:** да
- **regex (ECMA):** `^\d{9}$`
- **ошибка:** «БИК — 9 цифр».

### 5.2 Наименование банка

- **system_name:** `bank_name`
- **type:** string (2–120)
- **required:** да
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\s«»"'\-\.,()&/]{2,120}$`
- **ошибка:** «Наименование банка — 2–120 символов».

### 5.3 Корреспондентский счёт (к/с)

- **system_name:** `bank_ks`
- **type:** string (digits)
- **required:** да
- **regex (ECMA):** `^\d{20}$`
- **контроль БИК↔К/с:** строим строку **`"0" + bik[6:8] + ks`** (итого 23 цифры), применяем циклические веса `[7,1,3]`; условие: `Σ(d*w) % 10 == 0`.
- **ошибки:** «Корреспондентский счёт — 20 цифр», «К/с не проходит контрольную проверку с БИК».

### 5.4 Расчётный счёт (р/с)

- **system_name:** `bank_rs`
- **type:** string (digits)
- **required:** да
- **regex (ECMA):** `^\d{20}$`
- **контроль БИК↔Р/с:** строим строку **`bik[6:8] + rs`** (22 цифры), применяем те же веса `[7,1,3]`; условие: `Σ(d*w) % 10 == 0`.
- **ошибки:** «Расчётный счёт — 20 цифр», «Р/с не проходит контрольную проверку с БИК».

> Комментарий: веса [7,1,3] повторяются по циклу для каждого разряда контрольной строки; bik[6:8] — последние две цифры БИК.
> 

---

# 6) Дополнительно

### 6.1 Помета о печати/подписи

- **system_name:** `seal_note`
- **type:** string|null (0–120)
- **required:** нет
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\s«»"'\-\.,()&/]{0,120}$`
- **ошибка:** «До 120 символов».

### 6.2 Комментарии (служебно)

- **system_name:** `notes`
- **type:** string|null (0–500)
- **required:** нет
- **regex (ECMA):** `^[A-Za-zА-Яа-яЁё0-9\s«»"'\-\.,()&/]{0,500}$`
- **ошибка:** «До 500 символов».

---

## Общие правила и кросс-валидации

1. **Зависимость от `subject_type`:**
    - `legal_entity`: `inn`=10+КС, `kpp` обяз., `ogrn`=13+КС; `ogrnip` **не заполняется**.
    - `sole_proprietor`: `inn`=12+КС, `ogrnip`=15+КС; `kpp`/`ogrn` **не заполняются**.
2. **Формат даты:** `ДД.ММ.ГГГГ` + календарная проверка + «не позже сегодня» (для `poa_date`).
3. **Телефон:** ввод `+7XXXXXXXXXX` или `8XXXXXXXXXX`; **храним** строго `+7XXXXXXXXXX`.
4. **Нормализация:** trim всех текстовых полей; схлопывание повторных пробелов.
5. **Ошибки:** короткие, предметные, показываются inline; критичные блокируют «Сохранить».

---

## Быстрый чек-лист обязательности по типам

**ЮРЛИЦО (`legal_entity`):**

`name_full`, `subject_type`, `inn(10)`, `kpp(9)`, `ogrn(13)`, `address_legal`, `email`, `head_title`, `head_fio`, `authority_base`, `bank_bik`, `bank_name`, `bank_ks`, `bank_rs`

*(если `authority_base = Доверенности` → также `poa_number`, `poa_date`)*

**ИП (`sole_proprietor`):**

`name_full`, `subject_type`, `inn(12)`, `ogrnip(15)`, `address_legal`, `email`, `head_title`, `head_fio`, `authority_base`, `bank_bik`, `bank_name`, `bank_ks`, `bank_rs`

*(если `authority_base = Доверенности` → также `poa_number`, `poa_date`)*

---

## Примеры сообщений об ошибках

- «ИНН должен содержать 10 (для юрлица) или 12 (для ИП) цифр».
- «ИНН не проходит контрольную сумму».
- «КПП — 9 цифр (только для юрлица)».
- «ОГРН — 13 цифр / ОГРНИП — 15 цифр».
- «ОГРН/ОГРНИП не проходит контрольную сумму».
- «БИК — 9 цифр».
- «Р/с (или К/с) не проходит контрольную проверку с БИК».
- «E-mail в формате [name@example.com](mailto:name@example.com)».
- «Телефон в формате +7XXXXXXXXXX (или 8XXXXXXXXXX на вводе)».
- «Дата в формате ДД.ММ.ГГГГ, не позже сегодня».
- «Выберите тип субъекта: юрлицо или ИП».

---

### Важно

- При любых расхождениях между этим справочником и реализацией — **истиной является JSON Schema**, согласованная ранее (все паттерны — ECMA-safe).
- Готов выдать **валидирующие функции** (JS/TS) по контрольным суммам ИНН/ОГРН/ОГРНИП и проверке счетов с БИК — из коробки, если нужно.